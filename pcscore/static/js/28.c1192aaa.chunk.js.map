{"version":3,"sources":["components/Charts/AutoHeight.tsx","components/Charts/Bar/index.tsx","containers/pmscore/profile/components/HistoryScore.tsx","containers/pmscore/profile/style.module.less"],"names":["computeHeight","node","style","height","parseInt","concat","getComputedStyle","paddingTop","paddingBottom","getAutoHeight","n","parentNode","autoHeight","WrappedComponent","_React$Component","AutoHeightComponent","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","state","computedHeight","root","undefined","handleRoot","inherits","createClass","key","value","props","h","setState","react_default","a","createElement","ref","assign","React","Component","Bar","autoHideXLabels","resize","debounce","canvasWidth","clientWidth","_this$props","_this$props$data","data","_this$props$autoLabel","autoLabel","minWidth","handleRef","window","addEventListener","passive","removeEventListener","_this$props2","_this$props2$height","title","_this$props2$forceFit","forceFit","_this$props2$color","color","padding","transpose","titleFontSize","titlePosition","mystyles","marginBottom","fontSize","textAlign","className","styles","chart","BizCharts","scale","x","type","y","min","name","label","tickLine","showTitle","crosshairs","position","tooltip","defaultProps","Option","es_select","TestNumber","_ref","handleChange","card","Fragment","icon","marginRight","extra","defaultValue","width","onChange","cardContainer","row","container","gutter","col","span","Charts_Bar","module","exports","titleBoxC","titleBox","flexCenter"],"mappings":"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","file":"static/js/28.c1192aaa.chunk.js","sourcesContent":["import React from 'react';\n\nexport type IReactComponent<P = any> =\n  | React.StatelessComponent<P>\n  | React.ComponentClass<P>\n  | React.ClassicComponentClass<P>;\n\nfunction computeHeight(node: HTMLDivElement) {\n  const { style } = node;\n  style.height = '100%';\n  const totalHeight = parseInt(`${getComputedStyle(node).height}`, 10);\n  const padding =\n    parseInt(`${getComputedStyle(node).paddingTop}`, 10) +\n    parseInt(`${getComputedStyle(node).paddingBottom}`, 10);\n  return totalHeight - padding;\n}\n\nfunction getAutoHeight(n: HTMLDivElement | undefined) {\n  if (!n) {\n    return 0;\n  }\n\n  const node = n;\n\n  let height = computeHeight(node);\n  const parentNode = node.parentNode as HTMLDivElement;\n  if (parentNode) {\n    height = computeHeight(parentNode);\n  }\n\n  return height;\n}\n\ninterface AutoHeightProps {\n  height?: number;\n}\n\nfunction autoHeight() {\n  return <P extends AutoHeightProps>(\n    WrappedComponent: React.ComponentClass<P> | React.FC<P>,\n  ): React.ComponentClass<P> => {\n    class AutoHeightComponent extends React.Component<P & AutoHeightProps> {\n      state = {\n        computedHeight: 0,\n      };\n\n      root: HTMLDivElement | undefined = undefined;\n\n      componentDidMount() {\n        const { height } = this.props;\n        if (!height) {\n          let h = getAutoHeight(this.root);\n          this.setState({ computedHeight: h });\n          if (h < 1) {\n            h = getAutoHeight(this.root);\n            this.setState({ computedHeight: h });\n          }\n        }\n      }\n\n      handleRoot = (node: HTMLDivElement) => {\n        this.root = node;\n      };\n\n      render() {\n        const { height } = this.props;\n        const { computedHeight } = this.state;\n        const h = height || computedHeight;\n        return (\n          <div ref={this.handleRoot}>\n            {h > 0 && <WrappedComponent {...this.props} height={h} />}\n          </div>\n        );\n      }\n    }\n    return AutoHeightComponent;\n  };\n}\nexport default autoHeight;\n","import { Axis, Chart, Geom, Tooltip, Coord } from 'bizcharts';\nimport React, { Component } from 'react';\n\nimport {debounce} from 'lodash';\nimport autoHeight from '../AutoHeight';\nimport styles from '../index.less';\n\nexport interface BarProps {\n  title: React.ReactNode;\n  color?: string;\n  padding?: [number, number, number, number];\n  height?: number;\n  data: {\n    x: string;\n    y: number;\n  }[];\n  forceFit?: boolean;\n  autoLabel?: boolean;\n  style?: React.CSSProperties;\n  transpose?: boolean;\n  titleFontSize?: number;\n  titlePosition?: string;\n}\n\nclass Bar extends Component<\n  BarProps,\n  {\n    autoHideXLabels: boolean;\n  }\n> {\n  static defaultProps = {\n    titleFontSize: 14,\n    titlePosition: 'left',\n    transpose: false,\n  }\n  state = {\n    autoHideXLabels: false,\n  };\n\n  root: HTMLDivElement | undefined = undefined;\n\n  node: HTMLDivElement | undefined = undefined;\n\n  resize = debounce(() => {\n    if (!this.node || !this.node.parentNode) {\n      return;\n    }\n    const canvasWidth = (this.node.parentNode as HTMLDivElement).clientWidth;\n    const { data = [], autoLabel = true } = this.props;\n    if (!autoLabel) {\n      return;\n    }\n    const minWidth = data.length * 30;\n    const { autoHideXLabels } = this.state;\n\n    if (canvasWidth <= minWidth) {\n      if (!autoHideXLabels) {\n        this.setState({\n          autoHideXLabels: true,\n        });\n      }\n    } else if (autoHideXLabels) {\n      this.setState({\n        autoHideXLabels: false,\n      });\n    }\n  }, 500);\n\n  componentDidMount() {\n    window.addEventListener('resize', this.resize, { passive: true });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.resize);\n  }\n\n  handleRoot = (n: HTMLDivElement) => {\n    this.root = n;\n  };\n\n  handleRef = (n: HTMLDivElement) => {\n    this.node = n;\n  };\n\n  render() {\n    const {\n      height = 1,\n      title,\n      forceFit = true,\n      data,\n      color = 'rgba(24, 144, 255, 0.85)',\n      padding,\n      transpose,\n      titleFontSize,\n      titlePosition\n    } = this.props;\n\n    const { autoHideXLabels } = this.state;\n\n    const scale = {\n      x: {\n        type: 'cat',\n      },\n      y: {\n        min: 0,\n      },\n    };\n\n    const tooltip: [string, (...args: any[]) => { name?: string; value: string }] = [\n      'x*y',\n      (x: string, y: string) => ({\n        name: x,\n        value: y,\n      }),\n    ];\n\n    const mystyles = { marginBottom: 10, fontSize: titleFontSize, textAlign: titlePosition } as React.CSSProperties;\n\n    return (\n      <div className={styles.chart} style={{ height }} ref={this.handleRoot}>\n        <div ref={this.handleRef}>\n          {title && <h4 style={mystyles}>{title}</h4>}\n          <Chart\n            scale={scale}\n            height={title ? height - 41 : height}\n            forceFit={forceFit}\n            data={data}\n            padding={padding || 'auto'}\n          >\n            <Coord transpose={transpose} />\n            <Axis\n              name=\"x\"\n              title={false}\n              label={autoHideXLabels ? undefined : {}}\n              tickLine={autoHideXLabels ? undefined : {}}\n            />\n            <Axis name=\"y\" min={0} />\n            <Tooltip showTitle={false} crosshairs={false} />\n            <Geom type=\"interval\" position=\"x*y\" color={color} tooltip={tooltip} />\n          </Chart>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default autoHeight()(Bar);\n","import React from 'react';\nimport { Card, Icon, Select, Row, Col } from 'antd';\nimport styles from '../style.module.less'\nimport { TestNumberDataType } from '../data.d';\nimport Bar from 'components/Charts/Bar';\n\nconst Option = Select.Option;\nconst TestNumber = ({\n  handleChange,\n  data\n}: {\n  handleChange: (selecdValue: string) => void;\n  data: TestNumberDataType[];\n}) => (\n  <Card\n    title={<><Icon type=\"line-chart\" style={{ marginRight: 10, fontSize: 18 }} />历史成绩TOP3</>}\n    extra={\n      <Select defaultValue=\"jack\" style={{ width: 100 }} onChange={handleChange}>\n        <Option value=\"jack\">近6个月</Option>\n        <Option value=\"lucy\">半年</Option>\n        <Option value=\"disabled\" > 一年</Option>\n        <Option value=\"Yiminghe\">全部</Option>\n      </Select>\n    }\n    className={styles.cardContainer}\n  >\n      <Row className={styles.container} gutter={24} style={{height: 200}}>\n        <Col span={6}>\n          <Bar\n            title={<>{'立定跳远'}</>}\n            data={[{ x: '1', y: 2 }, { x: '2', y: 4 }, { x: '3', y: 6 }]}\n            transpose={true}\n            titlePosition='center'\n            titleFontSize={18}\n          />\n        </Col>\n        <Col span={6}>\n          <Bar\n            title='仰卧起坐'\n            data={[{ x: '1', y: 2 }, { x: '2', y: 4 }, { x: '3', y: 6 }]}\n            titlePosition='center'\n            titleFontSize={18}\n          />\n        </Col>\n        <Col span={6}>\n          <Bar\n            title='坐卧体前屈'\n            data={[{ x: '1', y: 2 }, { x: '2', y: 4 }, { x: '3', y: 6 }]}\n            transpose={true}\n            titlePosition='center'\n            titleFontSize={18}\n          />\n        </Col>\n        <Col span={6}>\n          <Bar\n            title='引体向上'\n            data={[{ x: '1', y: 2 }, { x: '2', y: 4 }, { x: '3', y: 6 }]}\n            titlePosition='center'\n            titleFontSize={18}\n          />\n        </Col>\n      </Row>\n  </Card>\n)\n\nexport default TestNumber;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardContainer\":\"src-containers-pmscore-profile-style-module__cardContainer--3Dkbp\",\"titleBoxC\":\"src-containers-pmscore-profile-style-module__titleBoxC--3k0y-\",\"titleBox\":\"src-containers-pmscore-profile-style-module__titleBox--3AIcj\",\"flexCenter\":\"src-containers-pmscore-profile-style-module__flexCenter--2cy0B\"};"],"sourceRoot":""}